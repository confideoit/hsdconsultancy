<!doctype html>
<html>
<head>
  <meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Course Blogs</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="blog_course.css">
</head>
<body>
  <div class="container py-4">
    <a href="blog.html" class="btn btn-link">&larr; Back</a>
    <h1 style="text-align: center; margin-bottom:30px; color:blue" id="title">Course</h1>
    <div id="allBlogs" class="row mt-3"></div>
  </div>

<script>
function getQuery(name){ return new URLSearchParams(location.search).get(name); }
function escapeHtml(s=''){ return String(s).replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])); }

fetch('courses.json').then(r=>r.json()).then(data=>{
  const id = getQuery('id');
  const course = data.courses.find(c => c.id === id);
  if(!course){ document.getElementById('title').textContent='Course not found'; return; }
  document.getElementById('title').textContent = course.name;
  const container = document.getElementById('allBlogs');
  container.innerHTML = course.blogs.map(b => `
    <div class="col-md-4 mb-3">
      <div class="card h-100">
        <img src="${escapeHtml(b.image)}" class="card-img-top" alt="${escapeHtml(b.title)}">
        <div class="card-body d-flex flex-column">
          <h6>${escapeHtml(b.title)}</h6>
          <p class="flex-grow-1">${escapeHtml(b.excerpt || b.content || '').slice(0,160)}${(b.excerpt||b.content||'').length>160 ? '...' : ''}</p>
          <a style="height:40px" class="btn btn-primary btn-sm mt-2" href="blog_data.html?course=${encodeURIComponent(course.id)}&blog=${encodeURIComponent(b.id)}">Read full</a>
        </div>
      </div>
    </div>`).join('');
});
</script>

<!-- Scroll to Top Button -->
<button id="scrollTopBtn" title="Go to top">&#8679;</button>

<script>
// Get the button
const scrollBtn = document.getElementById("scrollTopBtn");

// Show the button after scrolling down 300px
window.onscroll = function() {
  if (document.body.scrollTop > 300 || document.documentElement.scrollTop > 300) {
    scrollBtn.style.display = "block";
  } else {
    scrollBtn.style.display = "none";
  }
};

// When the user clicks the button, scroll to top smoothly
scrollBtn.addEventListener('click', () => {
  window.scrollTo({ top: 0, behavior: 'smooth' });
});
</script>


</body>
</html>
